#include <stdio.h>

struct Student
{
        int roll;
        char name[32];
        char dept[4];
        int marks;
        char grade;
};

void inputsize(int *size)
{
        printf("\nEnter Number of Students : ");
        scanf("%d", size);  
}

void input_record(struct Student * Sptr)
{
        printf("\nEnter Roll Number of Student : ");
        scanf("%d", &Sptr->roll);   /*    
        printf("\nEnter Name of Student        : ");
        scanf("%s", &Sptr->name);
        printf("\nEnter Dept of Student        : ");
        scanf("%s", &Sptr->dept);
        printf("\nEnter Marks of Student       : ");
        scanf("%d", &Sptr->marks); //Invalid Marks Condition To be Added */
}

void input_item(int *item)
{
        printf("\nEnter Roll Number of Student to Search for : ");
        scanf("%d", item);   
}

void output_record(struct Student *Sptr)
{
        //Segfault in this funcn
        printf("\nRoll Number of Student : ");
        printf("%d", Sptr->roll);       /*
        printf("\nName of Student        : ");
        printf("%s", Sptr->name);
        printf("\nDept of Student        : ");
        printf("%s", Sptr->dept);
        printf("\nMarks of Student       : ");
        printf("%d", Sptr->marks);
        printf("\nGrade of Student       : ");
        printf("%c", Sptr->grade);*/
}
char calc_grade(int marks)
{/*
        if(marks>=100 && marks>81) return 'A';
        if(marks>61) return 'B';
        if(marks>51) return 'C';
        if(marks>41) return 'D';
        if(marks>31) return 'E';
        else         return 'F';      */
}
/*
void input_all_records(int *size; struct Student S[*size], int *size)
{
        
        printf("\nSize = %d",*size);
        struct Student *cur=S;
        
        printf("\nSize = %d",*size);
        for(int i=0; i<size; ++i,++cur)
        {
            input_record(cur);
            output_record(cur);
        }
}*/

void input_all_records(int size, struct Student *arr)
{
        struct Student *cur = arr;
        for(int i=0; i<size; ++i, ++cur)
        {
                printf("\nFor Student %d,",i+1);
                input_record(cur);
        }
}

int linear_search(int size, struct Student *arr, int item)
{
        struct Student *cur = arr;
        for(int i=0; i<size; ++i, ++cur)
        {
                if(cur->roll == item)
                {
                        return i+1;
                }
        }       
        return -1;
}

void output_pos(int size, int *arr, int pos)
{
        
        if(pos==-1)
        {
                printf("\nStudent with given roll number does not exist.");
        }
        else
        {
                output_record(arr[pos]);
        }
}

int main()
{
        int size, item;
        char yn; //yes/no
        inputsize(&size);
        struct Student S[size];
        input_all_records(size,S);
        
        do{
                input_item(&item);  
                output_pos( size, S, linear_search(size,S,item) );
                
                scanf("%c",&yn);//Inputs unnecessary newline char
                printf("\nSearch Again ? ( Y->Yes / N->No ) : ");
                scanf("%c",&yn);
                
        }while(yn=='y'||yn=='Y');
        
        return 0;
}
